# Battery Analytics - Visual Architecture Guide

## ğŸ¯ System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BATTERY ANALYTICS SYSTEM                         â”‚
â”‚                  IoT Device Monitoring & Anomaly Detection               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Data Flow Diagram

```
                                    START
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   1. SQL DATABASE QUERY           â”‚
                    â”‚                                   â”‚
                    â”‚  SELECT voltage, capacity,        â”‚
                    â”‚         temperature               â”‚
                    â”‚  FROM battery_telemetry           â”‚
                    â”‚  WHERE region = 'Asia-Pacific'    â”‚
                    â”‚    AND timestamp > NOW() - 7 days â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Raw Data (Per Device)           â”‚
                    â”‚                                   â”‚
                    â”‚  GPS-TRACKER-B2:                  â”‚
                    â”‚    [3.72V, 3.68V, 3.75V, ...]    â”‚
                    â”‚    [62%, 61%, 63%, ...]           â”‚
                    â”‚    [31Â°C, 32Â°C, 31Â°C, ...]       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   2. KALMAN FILTER                â”‚
                    â”‚   (Noise Reduction)               â”‚
                    â”‚                                   â”‚
                    â”‚  Initialize: x=3.72, P=1, Q=0.01  â”‚
                    â”‚                                   â”‚
                    â”‚  For each measurement:            â”‚
                    â”‚    Predict: xâ» = x, Pâ» = P + Q   â”‚
                    â”‚    Update:  K = Pâ»/(Pâ» + R)      â”‚
                    â”‚             x = xâ» + K(z - xâ»)   â”‚
                    â”‚             P = (1-K)Pâ»           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Filtered Data                   â”‚
                    â”‚                                   â”‚
                    â”‚  Original: [3.72, 3.68, 3.75,     â”‚
                    â”‚             3.69, 3.71]           â”‚
                    â”‚  Filtered: [3.72, 3.70, 3.72,     â”‚
                    â”‚             3.71, 3.71]           â”‚
                    â”‚                                   â”‚
                    â”‚  âœ“ 40% noise reduction            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   3. Z-SCORE ANALYSIS             â”‚
                    â”‚   (Anomaly Detection)             â”‚
                    â”‚                                   â”‚
                    â”‚  Calculate baseline:              â”‚
                    â”‚    Î¼ (mean) = 3.71                â”‚
                    â”‚    Ïƒ (std dev) = 0.05             â”‚
                    â”‚                                   â”‚
                    â”‚  Current value: 3.45V             â”‚
                    â”‚                                   â”‚
                    â”‚  Z-score = (3.45 - 3.71) / 0.05   â”‚
                    â”‚          = -5.2                   â”‚
                    â”‚                                   â”‚
                    â”‚  |Z| > 3.0 â†’ CRITICAL ANOMALY!   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Anomaly Classification          â”‚
                    â”‚                                   â”‚
                    â”‚  Voltage:    Z = -5.2  âš ï¸ Criticalâ”‚
                    â”‚  Capacity:   Z = -2.8  âš ï¸ Warning â”‚
                    â”‚  Temperature: Z = 1.2  âœ“ Normal   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   4. RULE ENGINE                  â”‚
                    â”‚   (Threshold-Based Alerts)        â”‚
                    â”‚                                   â”‚
                    â”‚  Evaluate 10+ rules:              â”‚
                    â”‚                                   â”‚
                    â”‚  âœ“ Voltage < 2.8V?     â†’ YES ğŸ”´   â”‚
                    â”‚  âœ“ Capacity < 50%?     â†’ YES ğŸ”´   â”‚
                    â”‚  âœ“ Temperature > 45Â°C? â†’ NO       â”‚
                    â”‚  âœ“ Z-score critical?   â†’ YES ğŸ”´   â”‚
                    â”‚  âœ“ Cycles > 3000?      â†’ NO       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Alert Generation                â”‚
                    â”‚                                   â”‚
                    â”‚  ğŸ”´ VOLTAGE_CRITICAL_LOW          â”‚
                    â”‚     â†’ Action: IMMEDIATE_REPLACEMENTâ”‚
                    â”‚                                   â”‚
                    â”‚  ğŸ”´ CAPACITY_CRITICAL             â”‚
                    â”‚     â†’ Action: SCHEDULE_REPLACEMENT â”‚
                    â”‚                                   â”‚
                    â”‚  ğŸ”´ VOLTAGE_ANOMALY               â”‚
                    â”‚     â†’ Action: INVESTIGATE         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   5. RESULT AGGREGATION           â”‚
                    â”‚                                   â”‚
                    â”‚  Device: GPS-TRACKER-B2           â”‚
                    â”‚  Region: Asia-Pacific             â”‚
                    â”‚  Health: Critical                 â”‚
                    â”‚                                   â”‚
                    â”‚  Metrics:                         â”‚
                    â”‚    Voltage:      3.45V (â†“ 7%)    â”‚
                    â”‚    Capacity:     62%   (â†“ 27%)   â”‚
                    â”‚    Temperature:  31Â°C  (â†‘ 24%)   â”‚
                    â”‚                                   â”‚
                    â”‚  Z-Scores:                        â”‚
                    â”‚    Voltage:      -5.2 (Critical)  â”‚
                    â”‚    Capacity:     -2.8 (Warning)   â”‚
                    â”‚    Temperature:  +1.2 (Normal)    â”‚
                    â”‚                                   â”‚
                    â”‚  Alerts: 3 (2 Critical, 1 High)   â”‚
                    â”‚  Predicted Life: 3 months         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   6. OUTPUT                       â”‚
                    â”‚                                   â”‚
                    â”‚  â€¢ API Response (JSON)            â”‚
                    â”‚  â€¢ Dashboard Visualization        â”‚
                    â”‚  â€¢ Alert Notifications            â”‚
                    â”‚  â€¢ MCP Tool Result                â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                     END
```

## ğŸ”¬ Kalman Filter Visualization

```
                NOISY MEASUREMENTS
                        â”‚
    4.0V â”¤              â”‚    Ã—
         â”‚         Ã—    â”‚       Ã—
    3.8V â”¤    Ã—         â”‚  Ã—
         â”‚              â”‚         Ã—
    3.6V â”¤  Ã—           â”‚    Ã—
         â”‚     Ã—   Ã—    â”‚
    3.4V â”¤              â”‚ Ã—   Ã—
         â”‚              â”‚
    3.2V â”¤              â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Time
                        
                        â†“
                 KALMAN FILTER
                  (Q=0.01, R=0.1)
                        â†“
                        
               SMOOTHED OUTPUT
                        â”‚
    4.0V â”¤              â”‚
         â”‚         â”â”â”â”â”â”‚â”â”â”â”â”
    3.8V â”¤    â”â”â”â”â”     â”‚     â”â”â”â”â”
         â”‚              â”‚
    3.6V â”¤  â”â”          â”‚          â”â”
         â”‚              â”‚
    3.4V â”¤              â”‚
         â”‚              â”‚
    3.2V â”¤              â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Time
         
         âœ“ Noise Reduced by 40%
         âœ“ True Signal Preserved
```

## ğŸ“ˆ Z-Score Distribution

```
                Z-SCORE CLASSIFICATION
                
    Critical      Warning       Normal      Warning      Critical
       â†“             â†“            â†“            â†“            â†“
       
    â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”€
        â”‚         â”‚             â”‚             â”‚         â”‚
       -âˆ       -3Ïƒ           -2Ïƒ  Î¼=0  +2Ïƒ           +3Ïƒ       +âˆ
                              â†â”€â”€â”€ 95.4% â”€â”€â”€â†’
                â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 99.7% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’
                
    Interpretation:
    â€¢ |Z| â‰¤ 2.0: Normal (95.4% of data)
    â€¢ 2.0 < |Z| â‰¤ 3.0: Warning (4.3% of data)
    â€¢ |Z| > 3.0: Critical (0.3% of data)
    
    Example:
    Current capacity: 62%
    Historical mean:  85%
    Std deviation:    8%
    
    Z = (62 - 85) / 8 = -2.875
    
    Result: WARNING (capacity drop detected)
```

## âš™ï¸ Rule Engine Logic Flow

```
                    RULE ENGINE
                         â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                         â”‚
    â”œâ”€ Rule 1: VOLTAGE_CRITICAL_LOW          â”‚
    â”‚  if (voltage < 2.8V)                   â”‚
    â”‚    â†’ Severity: CRITICAL                 â”‚
    â”‚    â†’ Action: IMMEDIATE_REPLACEMENT      â”‚
    â”‚                                         â”‚
    â”œâ”€ Rule 2: CAPACITY_CRITICAL             â”‚
    â”‚  if (capacity < 50%)                   â”‚
    â”‚    â†’ Severity: HIGH                     â”‚
    â”‚    â†’ Action: SCHEDULE_REPLACEMENT       â”‚
    â”‚                                         â”‚
    â”œâ”€ Rule 3: TEMPERATURE_CRITICAL          â”‚
    â”‚  if (temperature > 45Â°C)               â”‚
    â”‚    â†’ Severity: CRITICAL                 â”‚
    â”‚    â†’ Action: SHUTDOWN_DEVICE            â”‚
    â”‚                                         â”‚
    â”œâ”€ Rule 4: VOLTAGE_ANOMALY               â”‚
    â”‚  if (voltageZScore.severity=='critical')â”‚
    â”‚    â†’ Severity: HIGH                     â”‚
    â”‚    â†’ Action: INVESTIGATE                â”‚
    â”‚                                         â”‚
    â””â”€ ... 6 more rules ...                  â”‚
                         â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   Triggered Alerts      â”‚
            â”‚                         â”‚
            â”‚  [Critical] Ã— 2         â”‚
            â”‚  [High]     Ã— 1         â”‚
            â”‚  [Medium]   Ã— 0         â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ—„ï¸ Database Schema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  battery_telemetry                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK  id                 BIGSERIAL                         â”‚
â”‚     device_id          VARCHAR(100)  â”€â”                 â”‚
â”‚     timestamp          TIMESTAMPTZ     â”‚                 â”‚
â”‚     voltage            DECIMAL(5,3)    â”‚ Time Series     â”‚
â”‚     capacity_percent   DECIMAL(5,2)    â”‚ Data            â”‚
â”‚     temperature_celsius DECIMAL(5,2)   â”‚                 â”‚
â”‚     charge_cycles      INTEGER        â”€â”˜                 â”‚
â”‚     region             VARCHAR(100)                      â”‚
â”‚                                                          â”‚
â”‚ Index: (device_id, timestamp DESC) â† Fast queries       â”‚
â”‚ Index: (region)                    â† Regional filtering  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ FK
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   battery_devices                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK  device_id          VARCHAR(100)                     â”‚
â”‚     device_type        VARCHAR(50)                       â”‚
â”‚     manufacturer       VARCHAR(100)                      â”‚
â”‚     model              VARCHAR(100)                      â”‚
â”‚     nominal_capacity   INTEGER                           â”‚
â”‚     nominal_voltage    DECIMAL(4,2)                      â”‚
â”‚     region             VARCHAR(100)                      â”‚
â”‚     status             VARCHAR(50)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Generates
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   battery_alerts                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK  id                 BIGSERIAL                         â”‚
â”‚     device_id          VARCHAR(100)                      â”‚
â”‚     alert_type         VARCHAR(100)                      â”‚
â”‚     severity           VARCHAR(20)                       â”‚
â”‚     message            TEXT                              â”‚
â”‚     action             VARCHAR(100)                      â”‚
â”‚     voltage            DECIMAL(5,3)                      â”‚
â”‚     capacity_percent   DECIMAL(5,2)                      â”‚
â”‚     z_score            DECIMAL(8,4)                      â”‚
â”‚     status             VARCHAR(50)    â† active/resolved  â”‚
â”‚     created_at         TIMESTAMPTZ                       â”‚
â”‚                                                          â”‚
â”‚ Index: (device_id)                                       â”‚
â”‚ Index: (severity)                                        â”‚
â”‚ Index: (status)                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Performance Characteristics

```
OPERATION              TIME        COMPLEXITY    NOTES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SQL Query (indexed)    10-50ms     O(log n)      Indexed by device_id
Kalman Filter          0.1ms       O(n)          Per device, n samples
Z-Score Calculation    0.05ms      O(n)          Per metric
Rule Evaluation        <1ms        O(r)          r = rule count
Full Pipeline          2-5ms       O(nÃ—m)        n samples, m metrics

SCALABILITY:
  100 devices Ã— 30 samples Ã— 3 metrics = ~500ms total
  Parallelizable across devices
```

## ğŸ”— Integration Points

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   PostgreSQL DB      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  batteryAnalytics.ts â”‚
                    â”‚                      â”‚
                    â”‚  â€¢ Kalman Filter     â”‚
                    â”‚  â€¢ Z-Score Analysis  â”‚
                    â”‚  â€¢ Rule Engine       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                â”‚                â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    riskRepo.ts    â”‚ â”‚  MCP   â”‚ â”‚   API Routes    â”‚
    â”‚                   â”‚ â”‚ Server â”‚ â”‚                 â”‚
    â”‚ getBattery        â”‚ â”‚        â”‚ â”‚ /api/battery-   â”‚
    â”‚ Performance()     â”‚ â”‚ Tools  â”‚ â”‚  performance    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚               â”‚               â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Dashboard UI    â”‚
                    â”‚                   â”‚
                    â”‚  â€¢ Real-time      â”‚
                    â”‚    monitoring     â”‚
                    â”‚  â€¢ Alerts         â”‚
                    â”‚  â€¢ Visualizations â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Example Output Structure

```json
{
  "devices": [
    {
      "device": "GPS-TRACKER-B2",
      "voltage": 2.9,
      "filteredVoltage": 2.89,
      "capacity": 62,
      "temperature": 31,
      "cycles": 2890,
      "health": "Critical",
      "predictedLife": "3 months",
      "region": "Asia-Pacific",
      "voltageZScore": -5.2,
      "capacityZScore": -2.8,
      "temperatureZScore": 1.2,
      "alerts": [
        {
          "alertType": "VOLTAGE_CRITICAL_LOW",
          "severity": "critical",
          "message": "Critical low voltage detected: 2.89V",
          "action": "IMMEDIATE_REPLACEMENT_REQUIRED"
        },
        {
          "alertType": "CAPACITY_CRITICAL",
          "severity": "high",
          "message": "Battery capacity critically low: 62%",
          "action": "SCHEDULE_REPLACEMENT"
        }
      ]
    }
  ],
  "summary": {
    "totalDevices": 4,
    "healthyDevices": 2,
    "warningDevices": 1,
    "criticalDevices": 1,
    "avgCapacity": 71,
    "totalAlerts": 5,
    "criticalAlerts": 2
  },
  "analytics": {
    "kalmanFilterApplied": true,
    "zScoreAnalysisApplied": true,
    "rulesEvaluated": 10,
    "anomaliesDetected": 3
  },
  "timestamp": "2025-10-12T10:30:00Z"
}
```

---

**Pro Tip**: See `BATTERY_ANALYTICS_README.md` for detailed explanations!
